{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { mergeMap } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../services/comment.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction CommentComponent_div_8_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Please enter some text! \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CommentComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 8);\n    i0.ɵɵtemplate(1, CommentComponent_div_8_div_1_Template, 2, 0, \"div\", 9);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n    const _r1 = i0.ɵɵreference(6);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r1.errors == null ? null : _r1.errors[\"required\"]);\n  }\n}\nexport class CommentComponent {\n  constructor(route, commentService) {\n    this.route = route;\n    this.commentService = commentService;\n    this.commentIsCreated = new EventEmitter();\n    this.movieId = this.route.snapshot.params[\"id\"];\n  }\n  submitHandler(form) {\n    if (form.invalid) {\n      return;\n    }\n    const {\n      comment\n    } = form.value;\n    this.commentService.createComment(comment, this.movieId).pipe(mergeMap(() => {\n      return this.commentService.getComments(this.movieId);\n    })).subscribe(comments => {\n      this.commentIsCreated.emit(comments);\n    });\n    form.reset();\n  }\n  static #_ = this.ɵfac = function CommentComponent_Factory(t) {\n    return new (t || CommentComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.CommentService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CommentComponent,\n    selectors: [[\"app-comment\"]],\n    outputs: {\n      commentIsCreated: \"commentIsCreated\"\n    },\n    decls: 9,\n    vars: 1,\n    consts: [[3, \"ngSubmit\"], [\"form\", \"ngForm\"], [1, \"form\"], [\"for\", \"comment\"], [\"name\", \"comment\", \"id\", \"comment\", \"placeholder\", \"Add your comment here...\", \"ngModel\", \"\", \"required\", \"\"], [\"comment\", \"ngModel\"], [\"type\", \"submit\", \"value\", \"Add comment\"], [\"class\", \"error\", 4, \"ngIf\"], [1, \"error\"], [4, \"ngIf\"]],\n    template: function CommentComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r4 = i0.ɵɵgetCurrentView();\n        i0.ɵɵelementStart(0, \"form\", 0, 1);\n        i0.ɵɵlistener(\"ngSubmit\", function CommentComponent_Template_form_ngSubmit_0_listener() {\n          i0.ɵɵrestoreView(_r4);\n          const _r0 = i0.ɵɵreference(1);\n          return i0.ɵɵresetView(ctx.submitHandler(_r0));\n        });\n        i0.ɵɵelementStart(2, \"div\", 2)(3, \"label\", 3);\n        i0.ɵɵtext(4, \"What is on your mind?\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(5, \"textarea\", 4, 5)(7, \"input\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(8, CommentComponent_div_8_Template, 2, 1, \"div\", 7);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        const _r1 = i0.ɵɵreference(6);\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngIf\", _r1.touched);\n      }\n    },\n    dependencies: [i3.NgIf, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.NgModel, i4.NgForm],\n    styles: [\"form[_ngcontent-%COMP%]{\\n    position: relative;\\n}\\n.form[_ngcontent-%COMP%]{\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n    gap: 3em;\\n    padding-top: 2em;\\n}\\nform[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{\\n    font-size: 2em;\\n    padding: 1em 0;\\n}\\nform[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{\\n    resize: none;\\n    width: 30em;\\n    height: 10em;\\n    border: 5px solid #ed0000;\\n}\\nform[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{\\n    font-size: 1.5em;\\n    background-color: black;\\n    color: #ed0000;\\n    border: 1px solid #ed0000;\\n    padding: 1em 2em;\\n}\\nform[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover{\\n    color: white;\\n    border-color: white;\\n    cursor: pointer;\\n}\\nform[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{\\n    margin: 0;\\n    padding: 0;\\n    position: absolute;\\n    bottom: -15%;\\n    left: 38%;\\n    color: red;\\n    font-size: 1.2em;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZmVhdHVyZS9jb21tZW50L2NvbW1lbnQuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLGtCQUFrQjtBQUN0QjtBQUNBO0lBQ0ksYUFBYTtJQUNiLHVCQUF1QjtJQUN2QixtQkFBbUI7SUFDbkIsUUFBUTtJQUNSLGdCQUFnQjtBQUNwQjtBQUNBO0lBQ0ksY0FBYztJQUNkLGNBQWM7QUFDbEI7QUFDQTtJQUNJLFlBQVk7SUFDWixXQUFXO0lBQ1gsWUFBWTtJQUNaLHlCQUF5QjtBQUM3QjtBQUNBO0lBQ0ksZ0JBQWdCO0lBQ2hCLHVCQUF1QjtJQUN2QixjQUFjO0lBQ2QseUJBQXlCO0lBQ3pCLGdCQUFnQjtBQUNwQjtBQUNBO0lBQ0ksWUFBWTtJQUNaLG1CQUFtQjtJQUNuQixlQUFlO0FBQ25CO0FBQ0E7SUFDSSxTQUFTO0lBQ1QsVUFBVTtJQUNWLGtCQUFrQjtJQUNsQixZQUFZO0lBQ1osU0FBUztJQUNULFVBQVU7SUFDVixnQkFBZ0I7QUFDcEIiLCJzb3VyY2VzQ29udGVudCI6WyJmb3Jte1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbn1cbi5mb3Jte1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBnYXA6IDNlbTtcbiAgICBwYWRkaW5nLXRvcDogMmVtO1xufVxuZm9ybSAuZm9ybSBsYWJlbHtcbiAgICBmb250LXNpemU6IDJlbTtcbiAgICBwYWRkaW5nOiAxZW0gMDtcbn1cbmZvcm0gLmZvcm0gdGV4dGFyZWF7XG4gICAgcmVzaXplOiBub25lO1xuICAgIHdpZHRoOiAzMGVtO1xuICAgIGhlaWdodDogMTBlbTtcbiAgICBib3JkZXI6IDVweCBzb2xpZCAjZWQwMDAwO1xufVxuZm9ybSAuZm9ybSBpbnB1dHtcbiAgICBmb250LXNpemU6IDEuNWVtO1xuICAgIGJhY2tncm91bmQtY29sb3I6IGJsYWNrO1xuICAgIGNvbG9yOiAjZWQwMDAwO1xuICAgIGJvcmRlcjogMXB4IHNvbGlkICNlZDAwMDA7XG4gICAgcGFkZGluZzogMWVtIDJlbTtcbn1cbmZvcm0gLmZvcm0gaW5wdXQ6aG92ZXJ7XG4gICAgY29sb3I6IHdoaXRlO1xuICAgIGJvcmRlci1jb2xvcjogd2hpdGU7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xufVxuZm9ybSAuZXJyb3J7XG4gICAgbWFyZ2luOiAwO1xuICAgIHBhZGRpbmc6IDA7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIGJvdHRvbTogLTE1JTtcbiAgICBsZWZ0OiAzOCU7XG4gICAgY29sb3I6IHJlZDtcbiAgICBmb250LXNpemU6IDEuMmVtO1xufSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n  });\n}","map":{"version":3,"names":["EventEmitter","mergeMap","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵtemplate","CommentComponent_div_8_div_1_Template","ɵɵadvance","ɵɵproperty","_r1","errors","CommentComponent","constructor","route","commentService","commentIsCreated","movieId","snapshot","params","submitHandler","form","invalid","comment","value","createComment","pipe","getComments","subscribe","comments","emit","reset","_","ɵɵdirectiveInject","i1","ActivatedRoute","i2","CommentService","_2","selectors","outputs","decls","vars","consts","template","CommentComponent_Template","rf","ctx","ɵɵlistener","CommentComponent_Template_form_ngSubmit_0_listener","ɵɵrestoreView","_r4","_r0","ɵɵreference","ɵɵresetView","ɵɵelement","CommentComponent_div_8_Template","touched"],"sources":["/Users/stoyangalchev/Desktop/Webflix-Angular/Webflix/src/app/feature/comment/comment.component.ts","/Users/stoyangalchev/Desktop/Webflix-Angular/Webflix/src/app/feature/comment/comment.component.html"],"sourcesContent":["import { Component, EventEmitter, OnInit, Output } from '@angular/core';\nimport { NgForm } from '@angular/forms';\nimport { ActivatedRoute } from '@angular/router';\nimport { CommentService } from '../services/comment.service';\nimport { mergeMap } from 'rxjs';\n\n\n@Component({\n  selector: 'app-comment',\n  templateUrl: './comment.component.html',\n  styleUrls: ['./comment.component.css']\n})\nexport class CommentComponent{\n\n  @Output() commentIsCreated = new EventEmitter<any>();\n  \n  movieId = this.route.snapshot.params[\"id\"];\n\n\n  constructor(\n    private route: ActivatedRoute,\n    private commentService: CommentService\n    ){}\n\n  submitHandler(form: NgForm){\n    if(form.invalid){\n      return\n    }\n\n    const {comment} = form.value;\n\n\n    this.commentService.createComment(comment, this.movieId).pipe(\n      mergeMap(()=>{\n        return this.commentService.getComments(this.movieId)\n      })\n    )\n    .subscribe((comments)=>{\n        this.commentIsCreated.emit(comments)\n    });\n\n    form.reset();\n  }\n}\n","<form #form=\"ngForm\" (ngSubmit)=\"submitHandler(form)\">\n    <div class=\"form\">\n        <label for=\"comment\">What is on your mind?</label>\n        <textarea name=\"comment\" id=\"comment\" placeholder=\"Add your comment here...\" ngModel #comment=\"ngModel\" required></textarea>\n        <input type=\"submit\" value=\"Add comment\">\n    </div>\n    \n    <div class=\"error\" *ngIf=\"comment.touched\">\n        <div *ngIf=\"comment.errors?.['required']\">\n            Please enter some text!\n        </div>\n    </div>\n</form>\n"],"mappings":"AAAA,SAAoBA,YAAY,QAAwB,eAAe;AAIvE,SAASC,QAAQ,QAAQ,MAAM;;;;;;;;ICIvBC,EAAA,CAAAC,cAAA,UAA0C;IACtCD,EAAA,CAAAE,MAAA,gCACJ;IAAAF,EAAA,CAAAG,YAAA,EAAM;;;;;IAHVH,EAAA,CAAAC,cAAA,aAA2C;IACvCD,EAAA,CAAAI,UAAA,IAAAC,qCAAA,iBAEM;IACVL,EAAA,CAAAG,YAAA,EAAM;;;;;IAHIH,EAAA,CAAAM,SAAA,GAAkC;IAAlCN,EAAA,CAAAO,UAAA,SAAAC,GAAA,CAAAC,MAAA,kBAAAD,GAAA,CAAAC,MAAA,aAAkC;;;ADIhD,OAAM,MAAOC,gBAAgB;EAO3BC,YACUC,KAAqB,EACrBC,cAA8B;IAD9B,KAAAD,KAAK,GAALA,KAAK;IACL,KAAAC,cAAc,GAAdA,cAAc;IAPd,KAAAC,gBAAgB,GAAG,IAAIhB,YAAY,EAAO;IAEpD,KAAAiB,OAAO,GAAG,IAAI,CAACH,KAAK,CAACI,QAAQ,CAACC,MAAM,CAAC,IAAI,CAAC;EAMtC;EAEJC,aAAaA,CAACC,IAAY;IACxB,IAAGA,IAAI,CAACC,OAAO,EAAC;MACd;;IAGF,MAAM;MAACC;IAAO,CAAC,GAAGF,IAAI,CAACG,KAAK;IAG5B,IAAI,CAACT,cAAc,CAACU,aAAa,CAACF,OAAO,EAAE,IAAI,CAACN,OAAO,CAAC,CAACS,IAAI,CAC3DzB,QAAQ,CAAC,MAAI;MACX,OAAO,IAAI,CAACc,cAAc,CAACY,WAAW,CAAC,IAAI,CAACV,OAAO,CAAC;IACtD,CAAC,CAAC,CACH,CACAW,SAAS,CAAEC,QAAQ,IAAG;MACnB,IAAI,CAACb,gBAAgB,CAACc,IAAI,CAACD,QAAQ,CAAC;IACxC,CAAC,CAAC;IAEFR,IAAI,CAACU,KAAK,EAAE;EACd;EAAC,QAAAC,CAAA,G;qBA9BUpB,gBAAgB,EAAAV,EAAA,CAAA+B,iBAAA,CAAAC,EAAA,CAAAC,cAAA,GAAAjC,EAAA,CAAA+B,iBAAA,CAAAG,EAAA,CAAAC,cAAA;EAAA;EAAA,QAAAC,EAAA,G;UAAhB1B,gBAAgB;IAAA2B,SAAA;IAAAC,OAAA;MAAAxB,gBAAA;IAAA;IAAAyB,KAAA;IAAAC,IAAA;IAAAC,MAAA;IAAAC,QAAA,WAAAC,0BAAAC,EAAA,EAAAC,GAAA;MAAA,IAAAD,EAAA;;QCZ7B5C,EAAA,CAAAC,cAAA,iBAAsD;QAAjCD,EAAA,CAAA8C,UAAA,sBAAAC,mDAAA;UAAA/C,EAAA,CAAAgD,aAAA,CAAAC,GAAA;UAAA,MAAAC,GAAA,GAAAlD,EAAA,CAAAmD,WAAA;UAAA,OAAYnD,EAAA,CAAAoD,WAAA,CAAAP,GAAA,CAAA3B,aAAA,CAAAgC,GAAA,CAAmB;QAAA,EAAC;QACjDlD,EAAA,CAAAC,cAAA,aAAkB;QACOD,EAAA,CAAAE,MAAA,4BAAqB;QAAAF,EAAA,CAAAG,YAAA,EAAQ;QAClDH,EAAA,CAAAqD,SAAA,qBAA4H;QAEhIrD,EAAA,CAAAG,YAAA,EAAM;QAENH,EAAA,CAAAI,UAAA,IAAAkD,+BAAA,iBAIM;QACVtD,EAAA,CAAAG,YAAA,EAAO;;;;QALiBH,EAAA,CAAAM,SAAA,GAAqB;QAArBN,EAAA,CAAAO,UAAA,SAAAC,GAAA,CAAA+C,OAAA,CAAqB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}