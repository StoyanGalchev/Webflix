{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/movie.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../services/modal.service\";\nimport * as i4 from \"../services/user.service\";\nimport * as i5 from \"../services/comment.service\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"../comment/comment.component\";\nimport * as i8 from \"../modal/modal.component\";\nfunction MovieDetailsComponent_app_modal_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-modal\", 11);\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵpropertyInterpolate(\"title\", ctx_r0.movie == null ? null : ctx_r0.movie.title);\n  }\n}\nfunction MovieDetailsComponent_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 12)(1, \"button\", 13);\n    i0.ɵɵlistener(\"click\", function MovieDetailsComponent_div_18_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.editHandler());\n    });\n    i0.ɵɵtext(2, \"Edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 13);\n    i0.ɵɵlistener(\"click\", function MovieDetailsComponent_div_18_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.deleteHandler());\n    });\n    i0.ɵɵtext(4, \"Delete\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction MovieDetailsComponent_app_comment_20_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-comment\", 14);\n    i0.ɵɵlistener(\"commentIsCreated\", function MovieDetailsComponent_app_comment_20_Template_app_comment_commentIsCreated_0_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.getNewComment($event));\n    });\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MovieDetailsComponent_h4_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h4\");\n    i0.ɵɵtext(1, \"There are no added comments yet.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MovieDetailsComponent_div_24_li_2_p_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"p\", 22);\n    i0.ɵɵlistener(\"click\", function MovieDetailsComponent_div_24_li_2_p_10_Template_p_click_0_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const comment_r11 = i0.ɵɵnextContext().$implicit;\n      const ctx_r13 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r13.deleteComment(comment_r11));\n    });\n    i0.ɵɵtext(1, \" Delete \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MovieDetailsComponent_div_24_li_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 17)(1, \"div\", 18)(2, \"div\", 19)(3, \"div\", 3);\n    i0.ɵɵelement(4, \"img\", 20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"h5\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"p\");\n    i0.ɵɵtext(8);\n    i0.ɵɵpipe(9, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(10, MovieDetailsComponent_div_24_li_2_p_10_Template, 2, 0, \"p\", 21);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"p\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const comment_r11 = ctx.$implicit;\n    const ctx_r10 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵpropertyInterpolate(\"src\", comment_r11.userId.imageUrl, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(comment_r11.userId.username);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Posted on: \", i0.ɵɵpipeBind2(9, 5, comment_r11.created_at, \"medium\"), \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r10.isCommentOwner(comment_r11));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(comment_r11.text);\n  }\n}\nfunction MovieDetailsComponent_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15)(1, \"ul\");\n    i0.ɵɵtemplate(2, MovieDetailsComponent_div_24_li_2_Template, 13, 8, \"li\", 16);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r4.comments);\n  }\n}\nexport default class MovieDetailsComponent {\n  constructor(movieService, route, modalService, userService, router, commentService) {\n    this.movieService = movieService;\n    this.route = route;\n    this.modalService = modalService;\n    this.userService = userService;\n    this.router = router;\n    this.commentService = commentService;\n    this.movieId = this.route.snapshot.params[\"id\"];\n    this.isLoggedIn = false;\n    this.isOwner = false;\n    this.userId = \"\";\n  }\n  ngOnInit() {\n    this.movieService.getMovie(this.movieId).subscribe(movie => {\n      this.movie = movie;\n      this.comments = movie.comments;\n      this.userService.user$.subscribe(user => {\n        if (user) {\n          this.userId = user._id;\n          this.isLoggedIn = true;\n          if (this.movie?.ownerId === user?._id) {\n            this.isOwner = true;\n          }\n        }\n      });\n    });\n  }\n  ngAfterViewInit() {\n    this.commentService.getComments(this.movieId).subscribe(comments => {\n      this.comments = comments;\n    }, error => {\n      console.error('Error fetching comments', error);\n    });\n  }\n  isCommentOwner(comment) {\n    return comment.userId._id === this.userId;\n  }\n  getNewComment(comments) {\n    this.comments = comments;\n  }\n  deleteHandler() {\n    console.log(\"Deleted movie\");\n    this.movieService.deleteMovie(this.movieId).subscribe(() => {\n      this.modalService.open();\n      // Navigate to another page or refresh the current page\n    }, error => {\n      console.error(\"Error deleting movie\", error);\n    });\n  }\n  editHandler() {\n    this.router.navigate([`/movie-edit/${this.movieId}`], {\n      state: {\n        isOwner: this.isOwner\n      }\n    });\n  }\n  deleteComment(comments) {\n    this.commentService.deletesComment(comments._id).subscribe(response => {\n      console.log(\"Comment deleted\", response);\n      this.comments = this.comments.filter(comment => comment._id !== comments._id);\n    }, error => {\n      console.error(\"Error deleting comment\", error);\n    });\n  }\n  static #_ = this.ɵfac = function MovieDetailsComponent_Factory(t) {\n    return new (t || MovieDetailsComponent)(i0.ɵɵdirectiveInject(i1.MovieService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.ModalService), i0.ɵɵdirectiveInject(i4.UserService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i5.CommentService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: MovieDetailsComponent,\n    selectors: [[\"app-movie-details\"]],\n    decls: 25,\n    vars: 12,\n    consts: [[3, \"title\", 4, \"ngIf\"], [1, \"movie-details\"], [1, \"details\"], [1, \"media\"], [3, \"src\", \"alt\"], [1, \"info\"], [\"class\", \"buttons\", 4, \"ngIf\"], [1, \"comments\"], [3, \"commentIsCreated\", 4, \"ngIf\"], [4, \"ngIf\"], [\"class\", \"comment-list\", 4, \"ngIf\"], [3, \"title\"], [1, \"buttons\"], [3, \"click\"], [3, \"commentIsCreated\"], [1, \"comment-list\"], [\"class\", \"comment\", 4, \"ngFor\", \"ngForOf\"], [1, \"comment\"], [1, \"comment-author\"], [1, \"media-author-info\"], [\"alt\", \"Profile picture\", 3, \"src\"], [\"class\", \"deleteBtn\", 3, \"click\", 4, \"ngIf\"], [1, \"deleteBtn\", 3, \"click\"]],\n    template: function MovieDetailsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, MovieDetailsComponent_app_modal_0_Template, 1, 1, \"app-modal\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1)(2, \"h3\");\n        i0.ɵɵtext(3, \"Details\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"div\", 2)(5, \"div\", 3);\n        i0.ɵɵelement(6, \"img\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"div\", 5)(8, \"h4\");\n        i0.ɵɵtext(9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"h5\");\n        i0.ɵɵtext(11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"p\");\n        i0.ɵɵtext(13);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"p\");\n        i0.ɵɵtext(15);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"p\");\n        i0.ɵɵtext(17);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(18, MovieDetailsComponent_div_18_Template, 5, 0, \"div\", 6);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(19, \"div\", 7);\n        i0.ɵɵtemplate(20, MovieDetailsComponent_app_comment_20_Template, 1, 0, \"app-comment\", 8);\n        i0.ɵɵelementStart(21, \"h4\");\n        i0.ɵɵtext(22, \"Comments\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(23, MovieDetailsComponent_h4_23_Template, 2, 0, \"h4\", 9);\n        i0.ɵɵtemplate(24, MovieDetailsComponent_div_24_Template, 3, 1, \"div\", 10);\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.isLoggedIn && ctx.isOwner);\n        i0.ɵɵadvance(6);\n        i0.ɵɵpropertyInterpolate(\"src\", ctx.movie == null ? null : ctx.movie.imageUrl, i0.ɵɵsanitizeUrl);\n        i0.ɵɵpropertyInterpolate(\"alt\", ctx.movie == null ? null : ctx.movie.title);\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(ctx.movie == null ? null : ctx.movie.title);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\"Director: \", ctx.movie == null ? null : ctx.movie.director, \" \");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\"Year: \", ctx.movie == null ? null : ctx.movie.year, \"\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\"Genre: \", ctx.movie == null ? null : ctx.movie.genre, \"\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\"Description: \", ctx.movie == null ? null : ctx.movie.plot, \"\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isLoggedIn && ctx.isOwner);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.isLoggedIn);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", !(ctx.movie == null ? null : ctx.movie.comments));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.movie == null ? null : ctx.movie.comments);\n      }\n    },\n    dependencies: [i6.NgForOf, i6.NgIf, i7.CommentComponent, i8.ModalComponent, i6.DatePipe],\n    styles: [\".movie-details[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  gap: 2em;\\n  background-color: rgba(0, 0, 0, 0.4);\\n  height: 100%;\\n}\\nh3[_ngcontent-%COMP%] {\\n  color: #ed0000;\\n  font-size: 10px;\\n  margin-top: 0;\\n\\n  text-shadow: 0 0 1em #ed0000, 0 0 1em #ed0000, 0 0 1em #ed0000;\\n}\\n\\n.movie-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\\n  color: #ed0000;\\n  padding-top: 2em;\\n  font-size: 4em;\\n  margin-bottom: 0;\\n}\\n.details[_ngcontent-%COMP%] {\\n  width: 100em;\\n  display: flex;\\n  gap: 5em;\\n  justify-content: center;\\n  align-items: flex-start;\\n  background-color: rgba(0, 0, 0, 0.6);\\n  border-radius: 1em;\\n  overflow: hidden;\\n  padding: 1em;\\n}\\n.details[_ngcontent-%COMP%]   .media[_ngcontent-%COMP%] {\\n  flex: 0 1 35em;\\n  border-radius: 1em;\\n  overflow: hidden;\\n}\\n.details[_ngcontent-%COMP%]   .media[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\\n  display: block;\\n  width: 69%;\\n  height: auto;\\n  border: 1px solid #ed0000;\\n  border-radius: 1em;\\n  box-shadow: 0 0 1em 0 rgba(244, 185, 83, 0.6);\\n  margin: 1em auto;\\n}\\n.details[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] {\\n  flex: 0 0 35em;\\n  color: #ed0000;\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: flex-start;\\n  gap: 2em;\\n  padding: 1em;\\n}\\n.details[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%] {\\n  font-size: 3.5em;\\n  margin-bottom: 0;\\n}\\n.details[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%] {\\n  font-size: 2em;\\n}\\n.details[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\\n  width: 35em;\\n  font-size: 1.5em;\\n}\\n.details[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%] {\\n  display: flex;\\n  gap: 3em;\\n}\\n.details[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\n  background-color: black;\\n  color: #ed0000;\\n  padding: 1em 2em;\\n  font-size: 1.5em;\\n  border: 1px solid #ed0000;\\n}\\n.details[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\\n  background-color: black;\\n  color: #ed0000;\\n  padding: 1em 2em;\\n  font-size: 1.5em;\\n  border: 1px solid #ed0000;\\n  text-decoration: none;\\n  display: block;\\n}\\n.details[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover {\\n  color: white;\\n  border-color: white;\\n  cursor: pointer;\\n}\\n.details[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover {\\n  color: white;\\n  border-color: white;\\n  cursor: pointer;\\n}\\n.comments[_ngcontent-%COMP%] {\\n  background-color: rgba(0, 0, 0, 0.6);\\n  border-radius: 1em;\\n  color: #ed0000;\\n  width: 100em;\\n}\\n.comments[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%] {\\n  text-align: center;\\n  padding: 1em;\\n  margin-top: 1em;\\n  font-size: 2em;\\n  border-top: 1px solid #ed0000;\\n  border-bottom: 1px solid #ed0000;\\n}\\n.comment-list[_ngcontent-%COMP%] {\\n  padding: 2em;\\n}\\n.comment-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  list-style: none;\\n  gap: 1em;\\n}\\n.comment[_ngcontent-%COMP%] {\\n  background-color: rgba(197, 184, 184, 0.6);\\n  color: white;\\n  border-radius: 0.5em;\\n  box-shadow: 0 0 1em 0 rgba(244, 185, 83, 0.6);\\n}\\n.comment[_ngcontent-%COMP%]   .comment-author[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  border-bottom: 4px solid #ed0000;\\n  height: 5em;\\n  padding: 0 1em;\\n}\\n.comment[_ngcontent-%COMP%]   .comment-author[_ngcontent-%COMP%]   .media-author-info[_ngcontent-%COMP%] {\\n  display: flex;\\n  gap: 1em;\\n}\\n.comment[_ngcontent-%COMP%]   .comment-author[_ngcontent-%COMP%]   .media-author-info[_ngcontent-%COMP%]   .media[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: center;\\n  border-radius: 50%;\\n  width: 3em;\\n  overflow: hidden;\\n}\\n.comment[_ngcontent-%COMP%]   .comment-author[_ngcontent-%COMP%]   .media-author-info[_ngcontent-%COMP%]   .media[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\\n  display: block;\\n  width: 100%;\\n  height: auto;\\n}\\n.comment[_ngcontent-%COMP%]   .comment-author[_ngcontent-%COMP%]   .media-author-info[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%] {\\n  margin-bottom: 0;\\n  font-size: 2em;\\n  align-self: flex-end;\\n}\\n.comment[_ngcontent-%COMP%]    > p[_ngcontent-%COMP%] {\\n  font-size: 1.5em;\\n  padding: 1em;\\n  margin-bottom: 0;\\n}\\n.comment[_ngcontent-%COMP%]   .comment-author[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\\n  margin-bottom: 0;\\n  align-self: flex-end;\\n  font-size: 1em;\\n}\\n\\n.deleteBtn[_ngcontent-%COMP%]{\\n  background-color: #ed0000;\\n  color: white;\\n  padding: 1em 2em;\\n  font-size: 1.5em;\\n  border: 1px solid #ed0000;\\n  margin: 1em;\\n  border-radius: 1em;\\n  cursor: pointer;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZmVhdHVyZS9tb3ZpZS1kZXRhaWxzL21vdmllLWRldGFpbHMuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGFBQWE7RUFDYixzQkFBc0I7RUFDdEIsbUJBQW1CO0VBQ25CLFFBQVE7RUFDUixvQ0FBb0M7RUFDcEMsWUFBWTtBQUNkO0FBQ0E7RUFDRSxjQUFjO0VBQ2QsZUFBZTtFQUNmLGFBQWE7O0VBRWIsOERBQThEO0FBQ2hFOztBQUVBO0VBQ0UsY0FBYztFQUNkLGdCQUFnQjtFQUNoQixjQUFjO0VBQ2QsZ0JBQWdCO0FBQ2xCO0FBQ0E7RUFDRSxZQUFZO0VBQ1osYUFBYTtFQUNiLFFBQVE7RUFDUix1QkFBdUI7RUFDdkIsdUJBQXVCO0VBQ3ZCLG9DQUFvQztFQUNwQyxrQkFBa0I7RUFDbEIsZ0JBQWdCO0VBQ2hCLFlBQVk7QUFDZDtBQUNBO0VBQ0UsY0FBYztFQUNkLGtCQUFrQjtFQUNsQixnQkFBZ0I7QUFDbEI7QUFDQTtFQUNFLGNBQWM7RUFDZCxVQUFVO0VBQ1YsWUFBWTtFQUNaLHlCQUF5QjtFQUN6QixrQkFBa0I7RUFDbEIsNkNBQTZDO0VBQzdDLGdCQUFnQjtBQUNsQjtBQUNBO0VBQ0UsY0FBYztFQUNkLGNBQWM7RUFDZCxhQUFhO0VBQ2Isc0JBQXNCO0VBQ3RCLDJCQUEyQjtFQUMzQixRQUFRO0VBQ1IsWUFBWTtBQUNkO0FBQ0E7RUFDRSxnQkFBZ0I7RUFDaEIsZ0JBQWdCO0FBQ2xCO0FBQ0E7RUFDRSxjQUFjO0FBQ2hCO0FBQ0E7RUFDRSxXQUFXO0VBQ1gsZ0JBQWdCO0FBQ2xCO0FBQ0E7RUFDRSxhQUFhO0VBQ2IsUUFBUTtBQUNWO0FBQ0E7RUFDRSx1QkFBdUI7RUFDdkIsY0FBYztFQUNkLGdCQUFnQjtFQUNoQixnQkFBZ0I7RUFDaEIseUJBQXlCO0FBQzNCO0FBQ0E7RUFDRSx1QkFBdUI7RUFDdkIsY0FBYztFQUNkLGdCQUFnQjtFQUNoQixnQkFBZ0I7RUFDaEIseUJBQXlCO0VBQ3pCLHFCQUFxQjtFQUNyQixjQUFjO0FBQ2hCO0FBQ0E7RUFDRSxZQUFZO0VBQ1osbUJBQW1CO0VBQ25CLGVBQWU7QUFDakI7QUFDQTtFQUNFLFlBQVk7RUFDWixtQkFBbUI7RUFDbkIsZUFBZTtBQUNqQjtBQUNBO0VBQ0Usb0NBQW9DO0VBQ3BDLGtCQUFrQjtFQUNsQixjQUFjO0VBQ2QsWUFBWTtBQUNkO0FBQ0E7RUFDRSxrQkFBa0I7RUFDbEIsWUFBWTtFQUNaLGVBQWU7RUFDZixjQUFjO0VBQ2QsNkJBQTZCO0VBQzdCLGdDQUFnQztBQUNsQztBQUNBO0VBQ0UsWUFBWTtBQUNkO0FBQ0E7RUFDRSxhQUFhO0VBQ2Isc0JBQXNCO0VBQ3RCLGdCQUFnQjtFQUNoQixRQUFRO0FBQ1Y7QUFDQTtFQUNFLDBDQUEwQztFQUMxQyxZQUFZO0VBQ1osb0JBQW9CO0VBQ3BCLDZDQUE2QztBQUMvQztBQUNBO0VBQ0UsYUFBYTtFQUNiLDhCQUE4QjtFQUM5QixtQkFBbUI7RUFDbkIsZ0NBQWdDO0VBQ2hDLFdBQVc7RUFDWCxjQUFjO0FBQ2hCO0FBQ0E7RUFDRSxhQUFhO0VBQ2IsUUFBUTtBQUNWO0FBQ0E7RUFDRSxhQUFhO0VBQ2IsdUJBQXVCO0VBQ3ZCLGtCQUFrQjtFQUNsQixVQUFVO0VBQ1YsZ0JBQWdCO0FBQ2xCO0FBQ0E7RUFDRSxjQUFjO0VBQ2QsV0FBVztFQUNYLFlBQVk7QUFDZDtBQUNBO0VBQ0UsZ0JBQWdCO0VBQ2hCLGNBQWM7RUFDZCxvQkFBb0I7QUFDdEI7QUFDQTtFQUNFLGdCQUFnQjtFQUNoQixZQUFZO0VBQ1osZ0JBQWdCO0FBQ2xCO0FBQ0E7RUFDRSxnQkFBZ0I7RUFDaEIsb0JBQW9CO0VBQ3BCLGNBQWM7QUFDaEI7O0FBRUE7RUFDRSx5QkFBeUI7RUFDekIsWUFBWTtFQUNaLGdCQUFnQjtFQUNoQixnQkFBZ0I7RUFDaEIseUJBQXlCO0VBQ3pCLFdBQVc7RUFDWCxrQkFBa0I7RUFDbEIsZUFBZTtBQUNqQiIsInNvdXJjZXNDb250ZW50IjpbIi5tb3ZpZS1kZXRhaWxzIHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgZ2FwOiAyZW07XG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC40KTtcbiAgaGVpZ2h0OiAxMDAlO1xufVxuaDMge1xuICBjb2xvcjogI2VkMDAwMDtcbiAgZm9udC1zaXplOiAxMHB4O1xuICBtYXJnaW4tdG9wOiAwO1xuXG4gIHRleHQtc2hhZG93OiAwIDAgMWVtICNlZDAwMDAsIDAgMCAxZW0gI2VkMDAwMCwgMCAwIDFlbSAjZWQwMDAwO1xufVxuXG4ubW92aWUtZGV0YWlscyBoMyB7XG4gIGNvbG9yOiAjZWQwMDAwO1xuICBwYWRkaW5nLXRvcDogMmVtO1xuICBmb250LXNpemU6IDRlbTtcbiAgbWFyZ2luLWJvdHRvbTogMDtcbn1cbi5kZXRhaWxzIHtcbiAgd2lkdGg6IDEwMGVtO1xuICBkaXNwbGF5OiBmbGV4O1xuICBnYXA6IDVlbTtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNik7XG4gIGJvcmRlci1yYWRpdXM6IDFlbTtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgcGFkZGluZzogMWVtO1xufVxuLmRldGFpbHMgLm1lZGlhIHtcbiAgZmxleDogMCAxIDM1ZW07XG4gIGJvcmRlci1yYWRpdXM6IDFlbTtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbn1cbi5kZXRhaWxzIC5tZWRpYSBpbWcge1xuICBkaXNwbGF5OiBibG9jaztcbiAgd2lkdGg6IDY5JTtcbiAgaGVpZ2h0OiBhdXRvO1xuICBib3JkZXI6IDFweCBzb2xpZCAjZWQwMDAwO1xuICBib3JkZXItcmFkaXVzOiAxZW07XG4gIGJveC1zaGFkb3c6IDAgMCAxZW0gMCByZ2JhKDI0NCwgMTg1LCA4MywgMC42KTtcbiAgbWFyZ2luOiAxZW0gYXV0bztcbn1cbi5kZXRhaWxzIC5pbmZvIHtcbiAgZmxleDogMCAwIDM1ZW07XG4gIGNvbG9yOiAjZWQwMDAwO1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtc3RhcnQ7XG4gIGdhcDogMmVtO1xuICBwYWRkaW5nOiAxZW07XG59XG4uZGV0YWlscyAuaW5mbyBoNCB7XG4gIGZvbnQtc2l6ZTogMy41ZW07XG4gIG1hcmdpbi1ib3R0b206IDA7XG59XG4uZGV0YWlscyAuaW5mbyBoNSB7XG4gIGZvbnQtc2l6ZTogMmVtO1xufVxuLmRldGFpbHMgLmluZm8gcCB7XG4gIHdpZHRoOiAzNWVtO1xuICBmb250LXNpemU6IDEuNWVtO1xufVxuLmRldGFpbHMgLmluZm8gLmJ1dHRvbnMge1xuICBkaXNwbGF5OiBmbGV4O1xuICBnYXA6IDNlbTtcbn1cbi5kZXRhaWxzIC5pbmZvIC5idXR0b25zIGJ1dHRvbiB7XG4gIGJhY2tncm91bmQtY29sb3I6IGJsYWNrO1xuICBjb2xvcjogI2VkMDAwMDtcbiAgcGFkZGluZzogMWVtIDJlbTtcbiAgZm9udC1zaXplOiAxLjVlbTtcbiAgYm9yZGVyOiAxcHggc29saWQgI2VkMDAwMDtcbn1cbi5kZXRhaWxzIC5pbmZvIC5idXR0b25zIGEge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiBibGFjaztcbiAgY29sb3I6ICNlZDAwMDA7XG4gIHBhZGRpbmc6IDFlbSAyZW07XG4gIGZvbnQtc2l6ZTogMS41ZW07XG4gIGJvcmRlcjogMXB4IHNvbGlkICNlZDAwMDA7XG4gIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbiAgZGlzcGxheTogYmxvY2s7XG59XG4uZGV0YWlscyAuaW5mbyAuYnV0dG9ucyBidXR0b246aG92ZXIge1xuICBjb2xvcjogd2hpdGU7XG4gIGJvcmRlci1jb2xvcjogd2hpdGU7XG4gIGN1cnNvcjogcG9pbnRlcjtcbn1cbi5kZXRhaWxzIC5pbmZvIC5idXR0b25zIGE6aG92ZXIge1xuICBjb2xvcjogd2hpdGU7XG4gIGJvcmRlci1jb2xvcjogd2hpdGU7XG4gIGN1cnNvcjogcG9pbnRlcjtcbn1cbi5jb21tZW50cyB7XG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC42KTtcbiAgYm9yZGVyLXJhZGl1czogMWVtO1xuICBjb2xvcjogI2VkMDAwMDtcbiAgd2lkdGg6IDEwMGVtO1xufVxuLmNvbW1lbnRzIGg0IHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBwYWRkaW5nOiAxZW07XG4gIG1hcmdpbi10b3A6IDFlbTtcbiAgZm9udC1zaXplOiAyZW07XG4gIGJvcmRlci10b3A6IDFweCBzb2xpZCAjZWQwMDAwO1xuICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2VkMDAwMDtcbn1cbi5jb21tZW50LWxpc3Qge1xuICBwYWRkaW5nOiAyZW07XG59XG4uY29tbWVudC1saXN0IHVsIHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgbGlzdC1zdHlsZTogbm9uZTtcbiAgZ2FwOiAxZW07XG59XG4uY29tbWVudCB7XG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMTk3LCAxODQsIDE4NCwgMC42KTtcbiAgY29sb3I6IHdoaXRlO1xuICBib3JkZXItcmFkaXVzOiAwLjVlbTtcbiAgYm94LXNoYWRvdzogMCAwIDFlbSAwIHJnYmEoMjQ0LCAxODUsIDgzLCAwLjYpO1xufVxuLmNvbW1lbnQgLmNvbW1lbnQtYXV0aG9yIHtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBib3JkZXItYm90dG9tOiA0cHggc29saWQgI2VkMDAwMDtcbiAgaGVpZ2h0OiA1ZW07XG4gIHBhZGRpbmc6IDAgMWVtO1xufVxuLmNvbW1lbnQgLmNvbW1lbnQtYXV0aG9yIC5tZWRpYS1hdXRob3ItaW5mbyB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGdhcDogMWVtO1xufVxuLmNvbW1lbnQgLmNvbW1lbnQtYXV0aG9yIC5tZWRpYS1hdXRob3ItaW5mbyAubWVkaWEge1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYm9yZGVyLXJhZGl1czogNTAlO1xuICB3aWR0aDogM2VtO1xuICBvdmVyZmxvdzogaGlkZGVuO1xufVxuLmNvbW1lbnQgLmNvbW1lbnQtYXV0aG9yIC5tZWRpYS1hdXRob3ItaW5mbyAubWVkaWEgaW1nIHtcbiAgZGlzcGxheTogYmxvY2s7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IGF1dG87XG59XG4uY29tbWVudCAuY29tbWVudC1hdXRob3IgLm1lZGlhLWF1dGhvci1pbmZvIGg1IHtcbiAgbWFyZ2luLWJvdHRvbTogMDtcbiAgZm9udC1zaXplOiAyZW07XG4gIGFsaWduLXNlbGY6IGZsZXgtZW5kO1xufVxuLmNvbW1lbnQgPiBwIHtcbiAgZm9udC1zaXplOiAxLjVlbTtcbiAgcGFkZGluZzogMWVtO1xuICBtYXJnaW4tYm90dG9tOiAwO1xufVxuLmNvbW1lbnQgLmNvbW1lbnQtYXV0aG9yIHAge1xuICBtYXJnaW4tYm90dG9tOiAwO1xuICBhbGlnbi1zZWxmOiBmbGV4LWVuZDtcbiAgZm9udC1zaXplOiAxZW07XG59XG5cbi5kZWxldGVCdG57XG4gIGJhY2tncm91bmQtY29sb3I6ICNlZDAwMDA7XG4gIGNvbG9yOiB3aGl0ZTtcbiAgcGFkZGluZzogMWVtIDJlbTtcbiAgZm9udC1zaXplOiAxLjVlbTtcbiAgYm9yZGVyOiAxcHggc29saWQgI2VkMDAwMDtcbiAgbWFyZ2luOiAxZW07XG4gIGJvcmRlci1yYWRpdXM6IDFlbTtcbiAgY3Vyc29yOiBwb2ludGVyO1xufSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n  });\n}","map":{"version":3,"names":["i0","ɵɵelement","ɵɵpropertyInterpolate","ctx_r0","movie","title","ɵɵelementStart","ɵɵlistener","MovieDetailsComponent_div_18_Template_button_click_1_listener","ɵɵrestoreView","_r6","ctx_r5","ɵɵnextContext","ɵɵresetView","editHandler","ɵɵtext","ɵɵelementEnd","MovieDetailsComponent_div_18_Template_button_click_3_listener","ctx_r7","deleteHandler","MovieDetailsComponent_app_comment_20_Template_app_comment_commentIsCreated_0_listener","$event","_r9","ctx_r8","getNewComment","MovieDetailsComponent_div_24_li_2_p_10_Template_p_click_0_listener","_r15","comment_r11","$implicit","ctx_r13","deleteComment","ɵɵtemplate","MovieDetailsComponent_div_24_li_2_p_10_Template","ɵɵadvance","userId","imageUrl","ɵɵsanitizeUrl","ɵɵtextInterpolate","username","ɵɵtextInterpolate1","ɵɵpipeBind2","created_at","ɵɵproperty","ctx_r10","isCommentOwner","text","MovieDetailsComponent_div_24_li_2_Template","ctx_r4","comments","MovieDetailsComponent","constructor","movieService","route","modalService","userService","router","commentService","movieId","snapshot","params","isLoggedIn","isOwner","ngOnInit","getMovie","subscribe","user$","user","_id","ownerId","ngAfterViewInit","getComments","error","console","comment","log","deleteMovie","open","navigate","state","deletesComment","response","filter","_","ɵɵdirectiveInject","i1","MovieService","i2","ActivatedRoute","i3","ModalService","i4","UserService","Router","i5","CommentService","_2","selectors","decls","vars","consts","template","MovieDetailsComponent_Template","rf","ctx","MovieDetailsComponent_app_modal_0_Template","MovieDetailsComponent_div_18_Template","MovieDetailsComponent_app_comment_20_Template","MovieDetailsComponent_h4_23_Template","MovieDetailsComponent_div_24_Template","director","year","genre","plot"],"sources":["/Users/stoyangalchev/Desktop/Webflix-Angular/Webflix/src/app/feature/movie-details/movie-details.component.ts","/Users/stoyangalchev/Desktop/Webflix-Angular/Webflix/src/app/feature/movie-details/movie-details.component.html"],"sourcesContent":["import { Component, OnInit } from \"@angular/core\";\nimport { MovieService } from \"../services/movie.service\";\nimport { Movie } from \"src/app/Types/Movie\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { ModalService } from \"../services/modal.service\";\nimport { UserService } from \"../services/user.service\";\nimport { CommentService } from \"../services/comment.service\";\n\n@Component({\n  selector: \"app-movie-details\",\n  templateUrl: \"./movie-details.component.html\",\n  styleUrls: [\"./movie-details.component.css\"],\n})\nexport default class MovieDetailsComponent implements OnInit {\n  comments: any;\n  movie: Movie | undefined;\n  movieId = this.route.snapshot.params[\"id\"];\n  isLoggedIn: boolean = false;\n  isOwner: boolean = false;\n  userId: string | undefined = \"\";\n\n  constructor(\n    private movieService: MovieService,\n    private route: ActivatedRoute,\n    private modalService: ModalService,\n    private userService: UserService,\n    private router: Router,\n    private commentService: CommentService\n  ) {}\n\n  ngOnInit(): void {\n    this.movieService.getMovie(this.movieId).subscribe((movie) => {\n      this.movie = movie;\n      this.comments = movie.comments;\n      \n      this.userService.user$.subscribe((user) => {\n        if (user) {\n          this.userId = user._id;\n          this.isLoggedIn = true;\n          if (this.movie?.ownerId === user?._id) {\n            this.isOwner = true;\n          }\n        }\n      });\n    });\n  }\n   ngAfterViewInit() {\n    this.commentService.getComments(this.movieId).subscribe(\n      (comments) => {\n        this.comments = comments;\n      },\n      (error) => {\n        console.error('Error fetching comments', error);\n      }\n    );\n  }\n\n  isCommentOwner(comment: any): boolean | undefined {\n   \n    return comment.userId._id === this.userId;\n  }\n\n  getNewComment(comments: any) {\n  \n    this.comments = comments;\n  }\n\n  deleteHandler(): void {\n    console.log(\"Deleted movie\");\n    this.movieService.deleteMovie(this.movieId).subscribe(\n      () => {\n        this.modalService.open();\n        // Navigate to another page or refresh the current page\n      },\n      (error) => {\n        console.error(\"Error deleting movie\", error);\n      }\n    );\n  }\n\n  editHandler(): void {\n    this.router.navigate([`/movie-edit/${this.movieId}`], {\n      state: { isOwner: this.isOwner },\n    });\n  }\n\n  deleteComment(comments: any): void {\n    this.commentService.deletesComment(comments._id).subscribe(\n      (response) => {\n        console.log(\"Comment deleted\", response);\n\n        this.comments = this.comments.filter(\n          (comment: any) => comment._id !== comments._id\n        );\n      },\n      (error) => {\n        console.error(\"Error deleting comment\", error);\n      }\n    );\n  }\n}\n","<app-modal title=\"{{movie?.title}}\" *ngIf=\"isLoggedIn && isOwner\" />\n<div class=\"movie-details\">\n    <h3>Details</h3>\n    <div class=\"details\">\n        <div class=\"media\">\n            <img src=\"{{movie?.imageUrl}}\" alt=\"{{movie?.title}}\">\n        </div>\n        <div class=\"info\">\n            <h4>{{movie?.title}}</h4>\n            <h5>Director: {{movie?.director}} </h5>\n            <p>Year: {{movie?.year}}</p>\n            <p>Genre: {{movie?.genre}}</p>\n            <p>Description: {{movie?.plot}}</p>\n            <div class=\"buttons\" *ngIf=\"isLoggedIn && isOwner\">\n                <button (click)=\"editHandler()\">Edit</button>\n                <button (click)=\"deleteHandler()\">Delete</button>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"comments\">\n\n        <app-comment *ngIf=\"isLoggedIn\" (commentIsCreated)=\"getNewComment($event)\" />\n\n        <h4>Comments</h4>\n        <h4 *ngIf=\"!movie?.comments\">There are no added comments yet.</h4>\n        <div class=\"comment-list\" *ngIf=\"movie?.comments\">\n            <ul>\n                <li class=\"comment\" *ngFor=\"let comment of comments\">\n                    <div class=\"comment-author\">\n                        <div class=\"media-author-info\">\n                            <div class=\"media\">\n                                <img src=\"{{comment.userId.imageUrl}}\" alt=\"Profile picture\">\n                            </div>\n                            <h5>{{comment.userId.username}}</h5>\n                        </div>\n                        <p>Posted on: {{comment.created_at | date:'medium'}}</p>\n                        <p *ngIf=\"isCommentOwner(comment)\" class=\"deleteBtn\" (click)=\"deleteComment(comment)\"> Delete\n                        </p>\n                    </div>\n                    <p>{{comment.text}}</p>\n                </li>\n            </ul>\n        </div>\n    </div>\n</div>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}